<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elo Rating API</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        pre {
            background: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
        }
        code {
            background: #f6f8fa;
            padding: 2px 4px;
            border-radius: 4px;
        }
        .endpoint {
            background: #e3f2fd;
            padding: 16px;
            border-radius: 6px;
            margin: 20px 0;
        }
        h1 { color: #1a73e8; }
        h2 { color: #2c5282; }
        .method {
            background: #4caf50;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1>Elo Rating API</h1>
<p>This API calculates new Elo ratings for matches with variable team sizes.</p>

<div class="endpoint">
    <h2>Endpoint</h2>
    <span class="method">POST</span> <code>/calculate</code>
</div>

<h2>Parameters</h2>
<pre>
{
    "teams": number[][],  // Array of arrays containing players' Elo ratings
    "winner": number,     // Index of winning team (0, 1, 2, etc.)
    "k": number          // Optional: K-factor (default: 32)
}</pre>

<h2>Usage Examples</h2>

<h3>1. 1v1 Match</h3>
<pre>
// Request
POST /calculate
{
    "teams": [[1200], [1400]],
    "winner": 0
}

// Response
{
    "newRatings": [[1227], [1373]],
    "changes": [[+27], [-27]]
}</pre>

<h3>2. 2v2 Match</h3>
<pre>
// Request
POST /calculate
{
    "teams": [[1200, 1300], [1400, 1500]],
    "winner": 1
}

// Response
{
    "newRatings": [[1178, 1278], [1422, 1522]],
    "changes": [[-22, -22], [+22, +22]]
}</pre>

<h3>3. Asymmetric Match (1v2)</h3>
<pre>
// Request
POST /calculate
{
    "teams": [[2000], [1400, 1600]],
    "winner": 0
}</pre>

<h2>Using with cURL</h2>
<pre>
curl -X POST https://your-api.vercel.app/calculate \
-H "Content-Type: application/json" \
-d '{"teams":[[1200],[1400]],"winner":0}'</pre>

<h2>The K-factor</h2>
<p>The K-factor determines how much ratings change after each game:</p>
<ul>
    <li>K = 32: Default value</li>
    <li>K = 16: For experienced players (smaller rating changes)</li>
    <li>K = 64: For beginners (larger rating changes)</li>
</ul>

<h2>Additional Information</h2>
<ul>
    <li>All teams must have at least one player</li>
    <li>You need at least two teams</li>
    <li>Winner index must be valid (0 to number of teams - 1)</li>
    <li>Ratings are always rounded to integers</li>
</ul>

<h2>Error Handling</h2>
<p>The API will return a 400 status code with an error message if:</p>
<ul>
    <li>The request body is invalid</li>
    <li>There are fewer than 2 teams</li>
    <li>The winner index is invalid</li>
</ul>

</body>
</html>
